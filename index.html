<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="/src/styles.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>crabdrop</title>
    <script type="module" src="/src/main.ts" defer></script>
</head>

<body>
<main id="setup-screen" class="container setup hidden">
    <div class="setup-card">
        <h1>ü¶Ä crabdrop</h1>
        <p class="subtitle">Connect your S3-compatible storage</p>

        <form id="setup-form">
            <div class="form-group">
                <label for="endpoint">Endpoint URL</label>
                <input
                        type="text"
                        id="endpoint"
                        placeholder="https://s3.us-east-1.amazonaws.com"
                />
                <span class="hint">Leave empty for AWS (uses region), or enter custom endpoint for MinIO/R2</span>
            </div>

            <div class="form-group">
                <label for="bucket">Bucket Name</label>
                <input
                        type="text"
                        id="bucket"
                        placeholder="my-bucket"
                        required
                />
            </div>

            <div class="form-group">
                <label for="region">Region</label>
                <input
                        type="text"
                        id="region"
                        placeholder="us-east-1"
                        required
                />
            </div>

            <div class="form-group">
                <label for="access-key">Access Key ID</label>
                <input
                        type="text"
                        id="access-key"
                        placeholder="AKIA..."
                        required
                />
            </div>

            <div class="form-group">
                <label for="secret-key">Secret Access Key</label>
                <input
                        type="password"
                        id="secret-key"
                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                        required
                />
            </div>

            <div class="form-group">
                <label for="encryption-passphrase">Encryption Passphrase</label>
                <input
                        type="password"
                        id="encryption-passphrase"
                        placeholder="Encryption passphrase (optional)"
                />
                <span class="hint">Optional. Files marked as encrypted will use this passphrase.</span>
            </div>

            <div id="setup-error" class="error hidden"></div>

            <button type="submit" id="btn-connect">
                Connect
            </button>
        </form>
    </div>
</main>

<main id="browser-screen" class="container hidden">
    <header>
        <h1>ü¶Ä crabdrop</h1>
    </header>

    <nav class="breadcrumb">
        <span id="current-path">/</span>
    </nav>

    <div class="toolbar">
        <button id="btn-back">‚Üê Back</button>
        <button id="btn-refresh">Refresh</button>
        <button id="btn-new-folder">New Folder</button>
        <input type="text" id="search-input" placeholder="Filter files..." />
        <button id="btn-settings" class="btn-right">‚öôÔ∏è</button>
    </div>

    <div id="file-list" class="file-list"></div>

</main>

<div id="drag-overlay" class="drag-overlay hidden">
    <div class="drag-overlay-content">
        <span class="drag-overlay-icon">üìÇ</span>
        <p>Drop files to upload</p>
    </div>
</div>

<div id="encrypt-confirm-modal" class="modal hidden">
    <div class="modal-content">
        <h3>Upload Files</h3>
        <p id="encrypt-confirm-count"></p>
        <div id="encrypt-confirm-files" class="encrypt-file-list"></div>
        <div class="encrypt-toggle-row">
            <input type="checkbox" id="encrypt-toggle" />
            <label for="encrypt-toggle">Encrypt</label>
        </div>
        <div class="modal-buttons">
            <button id="encrypt-confirm-cancel">Cancel</button>
            <button id="encrypt-confirm-upload">Upload</button>
        </div>
    </div>
</div>

<div id="folder-modal" class="modal hidden">
    <div class="modal-content">
        <h3>New Folder</h3>
        <label for="folder-name"></label><input type="text" id="folder-name" placeholder="Folder name"/>
        <div class="modal-buttons">
            <button id="folder-cancel">Cancel</button>
            <button id="folder-create">Create</button>
        </div>
    </div>
</div>

<div id="upload-panel" class="upload-panel hidden">
    <div class="upload-panel-header">
        <span id="upload-panel-title">Uploads</span>
        <button id="upload-panel-close" class="upload-panel-close">‚úï</button>
    </div>
    <div id="upload-list" class="upload-list"></div>
</div>

<template id="upload-item-template">
    <div class="upload-item">
        <div class="upload-item-row">
            <span class="upload-icon"></span>
            <span class="upload-name"></span>
            <span class="upload-percent"></span>
            <button class="upload-item-close">‚úï</button>
        </div>
        <div class="upload-progress-bar">
            <div class="upload-progress-fill"></div>
        </div>
        <div class="upload-details"></div>
    </div>
</template>
<div id="download-overlay" class="upload-overlay hidden">
    <div class="upload-card">
        <div class="upload-header">
            <span>Downloading</span>
            <button id="download-close" class="upload-close">‚úï</button>
        </div>

        <div class="upload-body">
            <div class="upload-filename">
                <span class="upload-icon">‚¨áÔ∏è</span>
                <span id="download-name">filename.ext</span>
            </div>

            <div class="upload-progress-container">
                <div class="upload-progress-bar">
                    <div id="download-progress-fill" class="upload-progress-fill"></div>
                </div>
                <span id="download-percent" class="upload-percent">0%</span>
            </div>

            <div class="upload-details">
                <span id="download-size-info" class="hidden"></span>
            </div>
        </div>
    </div>
</div>
<div id="context-menu" class="context-menu hidden">
    <button id="ctx-download">‚¨áÔ∏è Download</button>
    <button id="ctx-share">üîó Share</button>
    <button id="ctx-delete">üóëÔ∏è Delete</button>
</div>

<div id="share-modal" class="modal hidden">
    <div class="modal-content share-modal-content">
        <h3>Share File</h3>
        <p id="share-filename" class="share-filename"></p>

        <div class="form-group">
            <label for="share-expiry">Link expires in</label>
            <select id="share-expiry">
                <option value="900">15 minutes</option>
                <option value="3600" selected>1 hour</option>
                <option value="86400">24 hours</option>
                <option value="604800">7 days</option>
            </select>
        </div>

        <div id="share-url-container" class="share-url-container hidden">
            <label for="share-url"></label><input type="text" id="share-url" readonly />
            <button id="share-copy">Copy</button>
        </div>

        <div id="share-error" class="error hidden"></div>

        <div class="modal-buttons">
            <button id="share-cancel">Cancel</button>
            <button id="share-generate">Generate Link</button>
        </div>
    </div>
</div>
<div id="alert-container" class="alert-container"></div>
</body>
</html>
